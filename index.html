<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game Technologie - Tournoi Brevet</title>
    
    <!-- Chargement des biblioth√®ques via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'orbitron': ['Orbitron', 'sans-serif'],
                        'rajdhani': ['Rajdhani', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }
        
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .text-gradient {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        function EscapeGame() {
            const TEMPS_PAR_ROOM = 600;
            const FORM_LINK = "https://forms.gle/"; // √Ä REMPLACER
            
            const [ecran, setEcran] = useState('accueil');
            const [roomActuelle, setRoomActuelle] = useState(0);
            const [temps, setTemps] = useState(TEMPS_PAR_ROOM);
            const [enigmeActuelle, setEnigmeActuelle] = useState(0);
            const [enigmesSelectionnees, setEnigmesSelectionnees] = useState([]);
            const [reponse, setReponse] = useState('');
            const [erreur, setErreur] = useState(false);
            const [enigmesResolues, setEnigmesResolues] = useState([false, false, false, false]);
            const [indiceAffiche, setIndiceAffiche] = useState(false);
            const [codesRooms, setCodesRooms] = useState([]);
            const [codeEntree, setCodeEntree] = useState('');
            const [erreurCode, setErreurCode] = useState(false);
            const [messageDecrypte, setMessageDecrypte] = useState('');
            const [tempsTotal, setTempsTotal] = useState(0);
            const [chiffrementSelectionne, setChiffrementSelectionne] = useState(null);
            
            // √âtat tournoi
            const [tournoiNom, setTournoiNom] = useState('');
            const [tournoiClasse, setTournoiClasse] = useState('');
            const [classementLocal, setClassementLocal] = useState([]);
            
            // Banque d'√©nigmes simplifi√©e
            const banqueEnigmes = {
                evolution: [
                    { question: "Quelle innovation a permis de passer du t√©l√©phone fixe au mobile ?", reponse: "portabilite", indice: "Ce qui permet de d√©placer", type: "text" },
                    { question: "En quelle ann√©e le premier iPhone est-il sorti ?", reponse: "2007", indice: "Entre 2000 et 2010", type: "number" }
                ],
                cybersecurite: [
                    { question: "Comment appelle-t-on un programme malveillant ?", reponse: "virus", indice: "Comme une maladie", type: "text" },
                    { question: "Combien de caract√®res min pour un mot de passe s√ªr ?", reponse: "12", indice: "Plus de 10", type: "number" }
                ],
                durable: [
                    { question: "Combien de piliers du d√©veloppement durable ?", reponse: "3", indice: "√âconomique, social...", type: "number" },
                    { question: "Sur combien est not√© l'indice de r√©parabilit√© ?", reponse: "10", indice: "Comme une note", type: "number" }
                ],
                utilisateur: [
                    { question: "Comment s'appelle l'√©tude de l'adaptation √† l'humain ?", reponse: "ergonomie", indice: "Science du confort", type: "text" },
                    { question: "Combien de clics max pour acc√©der √† une info ?", reponse: "3", indice: "R√®gle des ... clics", type: "number" }
                ]
            };
            
            const roomsConfig = [
                { nom: "√âvolution Technologique", theme: "evolution", couleur: "from-purple-900 via-blue-900", icone: "üî¨" },
                { nom: "Cybers√©curit√©", theme: "cybersecurite", couleur: "from-red-900 via-orange-900", icone: "üîê" },
                { nom: "D√©veloppement Durable", theme: "durable", couleur: "from-green-900 via-emerald-900", icone: "üåç" },
                { nom: "Exp√©rience Utilisateur", theme: "utilisateur", couleur: "from-blue-900 via-cyan-900", icone: "üë§" },
                { nom: "D√©cryptage Final", theme: "crypto", couleur: "from-amber-900 via-yellow-900", icone: "üîë" }
            ];
            
            const systemesCodeage = [
                {
                    id: 'cesar',
                    nom: 'Chiffre de C√©sar',
                    description: 'D√©calage de chaque lettre dans l\'alphabet.',
                    exemple: 'A ‚Üí D (d√©calage +3)',
                    correct: true
                },
                {
                    id: 'atbash',
                    nom: 'Chiffre Atbash',
                    description: 'Inversion de l\'alphabet : A devient Z, B devient Y.',
                    exemple: 'A ‚Üí Z, B ‚Üí Y',
                    correct: false
                }
            ];
            
            // Fonctions tournoi
            const getClassementLocal = () => {
                try {
                    const stored = localStorage.getItem('escapeGameLocal');
                    return stored ? JSON.parse(stored) : [];
                } catch {
                    return [];
                }
            };
            
            const sauvegarderScoreLocal = () => {
                if (!tournoiNom.trim() || !tournoiClasse.trim()) {
                    alert('Entre ton nom et ta classe !');
                    return false;
                }
                
                const score = {
                    id: Date.now(),
                    nom: tournoiNom,
                    classe: tournoiClasse,
                    temps: formatTemps(tempsTotal),
                    tempsSecondes: tempsTotal,
                    date: new Date().toLocaleString('fr-FR')
                };
                
                const classementActuel = getClassementLocal();
                classementActuel.push(score);
                classementActuel.sort((a, b) => a.tempsSecondes - b.tempsSecondes);
                
                const top50 = classementActuel.slice(0, 50);
                localStorage.setItem('escapeGameLocal', JSON.stringify(top50));
                setClassementLocal(top50);
                
                alert(`‚úÖ Score enregistr√© !

üì∏ Prends une CAPTURE D'√âCRAN
üìù Remplis le formulaire : ${FORM_LINK}
üèÜ Attends les r√©sultats !`);
                
                return true;
            };
            
            // Fonctions jeu
            const tirerEnigmes = (theme) => {
                const banque = [...banqueEnigmes[theme]];
                return banque.sort(() => Math.random() - 0.5).slice(0, 2);
            };
            
            const genererCode = (index) => {
                const prefixes = ['EVO', 'CYB', 'DUR', 'UX', 'CRY'];
                return prefixes[index] + Math.floor(1000 + Math.random() * 9000);
            };
            
            useEffect(() => {
                if (ecran === 'room' && temps > 0) {
                    const timer = setInterval(() => {
                        setTemps(t => t - 1);
                        setTempsTotal(tt => tt + 1);
                    }, 1000);
                    return () => clearInterval(timer);
                }
            }, [ecran, temps]);
            
            useEffect(() => {
                setClassementLocal(getClassementLocal());
            }, []);
            
            const formatTemps = (s) => {
                const mins = Math.floor(s / 60);
                const secs = s % 60;
                return mins.toString().padStart(2, '0') + ':' + secs.toString().padStart(2, '0');
            };
            
            const demarrerJeu = () => {
                setCodesRooms([0, 1, 2, 3, 4].map(i => genererCode(i)));
                demarrerRoom(0);
            };
            
            const demarrerRoom = (index) => {
                if (index === 4) {
                    setRoomActuelle(index);
                    setTemps(TEMPS_PAR_ROOM);
                    setEcran('room5Crypto');
                } else {
                    setEnigmesSelectionnees(tirerEnigmes(roomsConfig[index].theme));
                    setRoomActuelle(index);
                    setEnigmeActuelle(0);
                    setEnigmesResolues([false, false]);
                    setTemps(TEMPS_PAR_ROOM);
                    setReponse('');
                    setErreur(false);
                    setIndiceAffiche(false);
                    setEcran('room');
                }
            };
            
            const verifierReponse = () => {
                const enigme = enigmesSelectionnees[enigmeActuelle];
                if (reponse.toLowerCase().trim() === enigme.reponse.toLowerCase()) {
                    const newResolues = [...enigmesResolues];
                    newResolues[enigmeActuelle] = true;
                    setEnigmesResolues(newResolues);
                    setErreur(false);
                    
                    if (newResolues.every(r => r)) {
                        setTimeout(() => setEcran('codeRoom'), 1000);
                    } else {
                        setTimeout(() => {
                            setEnigmeActuelle(enigmeActuelle + 1);
                            setReponse('');
                            setIndiceAffiche(false);
                        }, 1000);
                    }
                } else {
                    setErreur(true);
                }
            };
            
            const verifierCodeEntree = () => {
                if (codeEntree.toUpperCase() === codesRooms[roomActuelle]) {
                    setCodeEntree('');
                    setErreurCode(false);
                    roomActuelle < 4 ? demarrerRoom(roomActuelle + 1) : setEcran('messageFinal');
                } else {
                    setErreurCode(true);
                }
            };
            
            const essayerSysteme = (systemeId) => {
                const systeme = systemesCodeage.find(s => s.id === systemeId);
                if (systeme.correct) {
                    setEcran('messageFinal');
                } else {
                    alert("‚ùå Ce n'est pas le bon syst√®me !");
                }
            };
            
            const decrypterMessage = () => {
                if (messageDecrypte.toLowerCase().trim() === "bravo vous avez maitrise la technologie") {
                    setEcran('victoire');
                } else {
                    alert("R√©ponse incorrecte !");
                }
            };
            
            // ===== √âCRAN D'ACCUEIL =====
            if (ecran === 'accueil') {
                const top3Local = classementLocal.slice(0, 3);
                
                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-black p-4 flex items-center justify-center">
                        <div className="max-w-4xl w-full glass-panel rounded-3xl p-8 border border-purple-500/40">
                            <h1 className="text-5xl md:text-6xl font-bold text-center mb-6 text-gradient font-orbitron">
                                üéÆ Escape Game Technologie
                            </h1>
                            
                            <p className="text-xl text-center text-gray-300 mb-8">
                                5 salles pour r√©viser le Brevet de Technologie !
                            </p>
                            
                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 my-8">
                                {roomsConfig.map((room, i) => (
                                    <div key={i} className={`bg-gradient-to-r ${room.couleur} to-black p-4 rounded-xl border border-white/20 text-center`}>
                                        <div className="text-4xl mb-2">{room.icone}</div>
                                        <div className="text-white font-bold text-sm">{room.nom}</div>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="bg-gradient-to-r from-yellow-900/40 to-orange-900/40 p-6 rounded-xl border border-yellow-500/30 mb-6">
                                <h3 className="text-2xl font-bold text-yellow-300 mb-3">üèÜ TOURNOI INTER-CLASSES</h3>
                                <p className="text-gray-300">
                                    Participez au classement g√©n√©ral !<br/>
                                    Formulaire : <a href={FORM_LINK} target="_blank" className="text-blue-400 underline">{FORM_LINK}</a>
                                </p>
                            </div>
                            
                            {top3Local.length > 0 && (
                                <div className="bg-purple-900/40 p-4 rounded-xl border border-purple-500/30 mb-6">
                                    <h3 className="text-xl font-bold text-purple-300 mb-3 text-center">üèÜ TOP 3 - CE POSTE</h3>
                                    <div className="space-y-2">
                                        {top3Local.map((score, index) => (
                                            <div key={score.id} className={`flex justify-between items-center p-3 rounded-lg ${
                                                index === 0 ? 'bg-yellow-900/40' :
                                                index === 1 ? 'bg-gray-800/60' :
                                                'bg-orange-900/40'
                                            }`}>
                                                <div className="flex items-center">
                                                    <span className={`w-8 h-8 flex items-center justify-center rounded-full mr-3 ${
                                                        index === 0 ? 'bg-yellow-500 text-black' :
                                                        index === 1 ? 'bg-gray-400 text-black' :
                                                        'bg-orange-600'
                                                    }`}>
                                                        {index === 0 ? 'üëë' : index + 1}
                                                    </span>
                                                    <div>
                                                        <p className="font-bold">{score.nom}</p>
                                                        <p className="text-sm text-gray-400">{score.classe}</p>
                                                    </div>
                                                </div>
                                                <div className="font-mono font-bold">{score.temps}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            <button 
                                onClick={demarrerJeu}
                                className="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white font-bold py-5 px-8 rounded-xl text-2xl transition-all hover:scale-105 mb-6"
                            >
                                üöÄ Commencer le jeu
                            </button>
                        </div>
                    </div>
                );
            }
            
            // ===== √âCRAN DE VICTOIRE POUR GITHUB =====
            if (ecran === 'victoire') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-900 via-emerald-900 to-black p-4">
                        <div className="max-w-4xl mx-auto">
                            <div className="glass-panel rounded-3xl p-8 border border-green-500/40">
                                {/* Animation victoire */}
                                <div className="text-center mb-8">
                                    <div className="text-9xl mb-6 animate-bounce">üéâ</div>
                                    <h1 className="text-6xl font-bold mb-6 text-gradient font-orbitron">VICTOIRE !</h1>
                                    <div className="text-3xl text-white mb-8 font-bold">
                                        Bravo vous avez ma√Ætris√© la technologie
                                    </div>
                                </div>
                                
                                {/* Temps final */}
                                <div className="bg-green-900/40 border-2 border-green-400 rounded-2xl p-8 mb-8">
                                    <div className="text-center">
                                        <div className="text-6xl mb-4">üèÜ</div>
                                        <p className="text-2xl text-gray-300 mb-3">Votre temps :</p>
                                        <p className="text-5xl font-bold text-yellow-400 font-mono">
                                            {formatTemps(tempsTotal)}
                                        </p>
                                    </div>
                                </div>
                                
                                {/* Formulaire pour le tournoi */}
                                <div className="bg-gradient-to-br from-purple-900/40 to-blue-900/40 border-2 border-purple-400 rounded-2xl p-8 mb-8">
                                    <h3 className="text-2xl font-bold text-purple-300 mb-6 text-center">
                                        üìù PARTICIPER AU TOURNOI
                                    </h3>
                                    
                                    <div className="space-y-6">
                                        <div>
                                            <label className="block text-lg mb-2 text-white">1. Ton nom complet</label>
                                            <input 
                                                type="text"
                                                value={tournoiNom}
                                                onChange={(e) => setTournoiNom(e.target.value)}
                                                placeholder="Ex: DUPONT Jean"
                                                className="w-full p-4 bg-gray-800 rounded-xl text-xl border border-gray-700 focus:border-purple-500 focus:outline-none"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-lg mb-2 text-white">2. Ta classe</label>
                                            <input 
                                                type="text"
                                                value={tournoiClasse}
                                                onChange={(e) => setTournoiClasse(e.target.value)}
                                                placeholder="Ex: 3A"
                                                className="w-full p-4 bg-gray-800 rounded-xl text-xl border border-gray-700 focus:border-purple-500 focus:outline-none"
                                            />
                                        </div>
                                        <button 
                                            onClick={sauvegarderScoreLocal}
                                            className="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-4 rounded-xl text-2xl transition-all"
                                        >
                                            üíæ Enregistrer mon score local
                                        </button>
                                    </div>
                                    
                                    {/* Instructions pour le tournoi officiel */}
                                    <div className="mt-8 p-6 bg-gradient-to-r from-yellow-900/40 to-orange-900/40 rounded-xl border-2 border-yellow-400">
                                        <h4 className="text-xl font-bold text-yellow-300 mb-4">
                                            üèÜ POUR LE TOURNOI OFFICIEL :
                                        </h4>
                                        
                                        <ol className="list-decimal list-inside space-y-3 text-white">
                                            <li className="mb-2">
                                                <span className="font-bold">üì∏ Capture d'√©cran :</span> 
                                                Prends une photo COMPL√àTE de cet √©cran
                                            </li>
                                            <li className="mb-2">
                                                <span className="font-bold">üìù Formulaire :</span> 
                                                Remplis le formulaire officiel
                                            </li>
                                            <li>
                                                <span className="font-bold">‚è±Ô∏è Attente :</span> 
                                                R√©sultats annonc√©s en classe
                                            </li>
                                        </ol>
                                        
                                        <a 
                                            href={FORM_LINK}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="mt-4 inline-block w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-3 px-6 rounded-lg text-xl text-center transition-all"
                                        >
                                            üì§ Formulaire officiel du tournoi
                                        </a>
                                    </div>
                                </div>
                                
                                {/* Boutons d'action */}
                                <div className="text-center space-y-6">
                                    <button 
                                        onClick={() => setEcran('accueil')}
                                        className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 px-8 rounded-xl text-xl w-full max-w-md mx-auto block transition-all hover:scale-105"
                                    >
                                        üè† Retour √† l'accueil
                                    </button>
                                    
                                    <div className="text-gray-400 text-sm">
                                        <p>üí° Le classement local est stock√© sur CE POSTE seulement.</p>
                                        <p>Pour le tournoi g√©n√©ral, utilisez le formulaire Google avec capture d'√©cran.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            // ===== √âCRAN ROOM5CRYPTO =====
            if (ecran === 'room5Crypto') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-amber-900 via-yellow-900 to-black p-4">
                        <div className="max-w-4xl mx-auto">
                            <div className="glass-panel rounded-3xl p-8 border border-yellow-500/40">
                                <div className="text-center mb-8">
                                    <div className="text-6xl mb-4">üîë</div>
                                    <h1 className="text-4xl font-bold mb-4 text-gradient font-orbitron">
                                        Room 5 : Syst√®mes de Codage
                                    </h1>
                                    <p className="text-xl text-gray-300">Choisissez le bon syst√®me !</p>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                    {systemesCodeage.map((sys) => (
                                        <div 
                                            key={sys.id}
                                            onClick={() => setChiffrementSelectionne(sys.id === chiffrementSelectionne ? null : sys.id)}
                                            className={`cursor-pointer bg-gradient-to-br from-yellow-900/40 to-orange-900/40 p-6 rounded-2xl border-2 transition-all ${
                                                chiffrementSelectionne === sys.id ? 'border-yellow-400' : 'border-gray-500'
                                            }`}
                                        >
                                            <h3 className="text-2xl font-bold text-yellow-300 mb-3">{sys.nom}</h3>
                                            <p className="text-gray-300 mb-4">{sys.description}</p>
                                            <div className="bg-black/40 p-4 rounded-lg mb-4">
                                                <p className="text-yellow-200 font-mono">{sys.exemple}</p>
                                            </div>
                                            {chiffrementSelectionne === sys.id && (
                                                <button 
                                                    onClick={(e) => { e.stopPropagation(); essayerSysteme(sys.id); }}
                                                    className="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg"
                                                >
                                                    ‚úì Utiliser ce syst√®me
                                                </button>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            // ===== √âCRAN CODEROOM =====
            if (ecran === 'codeRoom') {
                const room = roomsConfig[roomActuelle];
                return (
                    <div className={`min-h-screen bg-gradient-to-br ${room.couleur} to-black flex items-center justify-center p-4`}>
                        <div className="max-w-2xl w-full glass-panel rounded-3xl p-8 border border-white/30 text-center">
                            <div className="text-6xl mb-6">{room.icone}</div>
                            <h2 className="text-4xl font-bold mb-6 text-white">Room {roomActuelle + 1} Termin√©e !</h2>
                            
                            <div className="bg-green-900/40 border-2 border-green-400 rounded-2xl p-8 mb-8">
                                <div className="text-6xl mb-4">üîë</div>
                                <p className="text-2xl text-gray-300 mb-4">Code d'acc√®s :</p>
                                <p className="text-5xl font-bold text-yellow-400 font-mono">
                                    {codesRooms[roomActuelle]}
                                </p>
                            </div>
                            
                            {roomActuelle < 4 ? (
                                <div>
                                    <p className="text-xl text-gray-300 mb-6">Entrez ce code :</p>
                                    <input 
                                        type="text"
                                        value={codeEntree}
                                        onChange={(e) => setCodeEntree(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && verifierCodeEntree()}
                                        placeholder="CODE..."
                                        className="w-full bg-gray-800 border-2 border-purple-500/50 rounded-xl px-6 py-4 text-white text-2xl text-center font-bold uppercase focus:outline-none mb-4"
                                    />
                                    {erreurCode && (
                                        <div className="flex items-center justify-center gap-2 text-red-400 mb-4">
                                            <span className="text-2xl">‚ùå</span>
                                            <span>Code incorrect !</span>
                                        </div>
                                    )}
                                    <button 
                                        onClick={verifierCodeEntree}
                                        className="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-4 px-8 rounded-xl text-xl"
                                    >
                                        Valider
                                    </button>
                                </div>
                            ) : (
                                <button 
                                    onClick={() => setEcran('messageFinal')}
                                    className="w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold py-4 px-8 rounded-xl text-xl"
                                >
                                    D√©fi Final ‚Üí
                                </button>
                            )}
                        </div>
                    </div>
                );
            }
            
            // ===== √âCRAN MESSAGEFINAL =====
            if (ecran === 'messageFinal') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-yellow-900 via-orange-900 to-black flex items-center justify-center p-4">
                        <div className="max-w-3xl w-full glass-panel rounded-3xl p-8 border border-yellow-500/40">
                            <div className="text-center mb-8">
                                <div className="text-6xl mb-4">üîì</div>
                                <h2 className="text-4xl font-bold mb-6 text-gradient font-orbitron">D√©fi Final</h2>
                                <p className="text-xl text-green-400 font-bold">‚úÖ Bon syst√®me choisi !</p>
                            </div>
                            
                            <div className="bg-orange-900/40 border-2 border-orange-400 rounded-2xl p-6 mb-8">
                                <h3 className="text-2xl font-bold text-orange-300 mb-4">üîê Message Crypt√© :</h3>
                                <div className="bg-black/60 p-6 rounded-lg">
                                    <p className="text-3xl font-mono text-white text-center">
                                        Csbwp wpvt bwfa nbjusjuf mb ufdiopophjf
                                    </p>
                                </div>
                            </div>
                            
                            <div className="bg-yellow-900/30 border-2 border-yellow-500/50 rounded-xl p-6 mb-8">
                                <h3 className="text-2xl font-bold text-yellow-300 mb-3">üí° M√©thode C√©sar :</h3>
                                <p className="text-gray-300 text-lg mb-3">
                                    D√©calage de <span className="text-yellow-400 font-bold">1 lettre vers la GAUCHE</span>
                                </p>
                                <div className="bg-black/40 p-4 rounded-lg">
                                    <p className="text-center text-yellow-200 font-mono">B ‚Üí A, C ‚Üí B, D ‚Üí C...</p>
                                </div>
                            </div>
                            
                            <input 
                                type="text"
                                value={messageDecrypte}
                                onChange={(e) => setMessageDecrypte(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && decrypterMessage()}
                                placeholder="Message d√©crypt√©..."
                                className="w-full bg-gray-800 border-2 border-yellow-500/50 rounded-xl px-6 py-4 text-white text-xl focus:outline-none mb-6"
                            />
                            
                            <button 
                                onClick={decrypterMessage}
                                className="w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold py-4 px-8 rounded-xl text-2xl"
                            >
                                D√©crypter
                            </button>
                        </div>
                    </div>
                );
            }
            
            // ===== √âCRAN ROOM STANDARD =====
            const room = roomsConfig[roomActuelle];
            const enigme = enigmesSelectionnees[enigmeActuelle];
            const progression = (enigmesResolues.filter(Boolean).length / 2) * 100;
            
            return (
                <div className={`min-h-screen bg-gradient-to-br ${room.couleur} to-black p-4`}>
                    {/* En-t√™te */}
                    <div className="max-w-4xl mx-auto mb-6">
                        <div className="glass-panel rounded-2xl p-5 border border-white/30">
                            <div className="flex justify-between items-center mb-4">
                                <div className="flex items-center gap-4">
                                    <div className="text-4xl">{room.icone}</div>
                                    <div>
                                        <div className="text-white font-bold text-2xl">
                                            Room {roomActuelle + 1}: {room.nom}
                                        </div>
                                        <div className="text-gray-300">
                                            √ânigme {enigmeActuelle + 1} / 2
                                        </div>
                                    </div>
                                </div>
                                <div className="flex items-center gap-3">
                                    <span className="text-3xl">‚è±Ô∏è</span>
                                    <span className={`text-4xl font-bold font-mono ${
                                        temps < 60 ? 'text-red-400' : 'text-yellow-400'
                                    }`}>
                                        {formatTemps(temps)}
                                    </span>
                                </div>
                            </div>
                            <div className="w-full bg-gray-700 rounded-full h-5">
                                <div 
                                    className="bg-gradient-to-r from-green-500 to-emerald-500 h-5 rounded-full transition-all duration-500"
                                    style={{ width: `${progression}%` }}
                                />
                            </div>
                        </div>
                    </div>
                    
                    {/* √ânigme */}
                    <div className="max-w-4xl mx-auto">
                        <div className="glass-panel rounded-3xl p-8 border border-white/30">
                            <div className="flex items-center gap-4 mb-6">
                                <span className="text-4xl">üîí</span>
                                <h2 className="text-3xl font-bold text-white">
                                    √ânigme {enigmeActuelle + 1}
                                </h2>
                            </div>
                            
                            <div className="bg-white/10 p-8 rounded-2xl border border-white/20 mb-6">
                                <p className="text-2xl text-white">{enigme.question}</p>
                            </div>
                            
                            {indiceAffiche && (
                                <div className="bg-yellow-900/40 border-2 border-yellow-500/50 p-5 rounded-lg mb-6 flex items-start gap-3">
                                    <span className="text-3xl">üí°</span>
                                    <p className="text-yellow-200 text-xl">{enigme.indice}</p>
                                </div>
                            )}
                            
                            <div className="space-y-5">
                                <input 
                                    type={enigme.type}
                                    value={reponse}
                                    onChange={(e) => setReponse(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && verifierReponse()}
                                    disabled={enigmesResolues[enigmeActuelle]}
                                    placeholder="Votre r√©ponse..."
                                    className="w-full bg-gray-800 border-2 border-white/30 rounded-xl px-6 py-5 text-white text-2xl focus:outline-none focus:border-blue-500 disabled:opacity-50"
                                />
                                
                                {erreur && (
                                    <div className="flex items-center gap-3 text-red-400 text-xl">
                                        <span className="text-2xl">‚ùå</span>
                                        <span>Incorrect !</span>
                                    </div>
                                )}
                                
                                {enigmesResolues[enigmeActuelle] && (
                                    <div className="flex items-center gap-3 text-green-400 text-xl">
                                        <span className="text-2xl">‚úÖ</span>
                                        <span>R√©solue !</span>
                                    </div>
                                )}
                                
                                <div className="flex gap-4">
                                    <button 
                                        onClick={verifierReponse}
                                        disabled={enigmesResolues[enigmeActuelle] || !reponse}
                                        className="flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 disabled:from-gray-600 disabled:to-gray-600 text-white font-bold py-5 px-6 rounded-xl text-xl disabled:cursor-not-allowed transition-all"
                                    >
                                        Valider
                                    </button>
                                    
                                    {!indiceAffiche && !enigmesResolues[enigmeActuelle] && (
                                        <button 
                                            onClick={() => setIndiceAffiche(true)}
                                            className="bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-5 px-8 rounded-xl flex items-center gap-3 transition-all"
                                        >
                                            <span className="text-2xl">üí°</span>
                                            Indice
                                        </button>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        
        // Rendu de l'application
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EscapeGame />);
    </script>
    
    <script>
        // Message de chargement
        if (!document.getElementById('root').innerHTML) {
            document.getElementById('root').innerHTML = `
                <div class="min-h-screen flex items-center justify-center p-4">
                    <div class="text-center">
                        <div class="text-6xl mb-4 animate-pulse">üéÆ</div>
                        <h1 class="text-3xl text-white mb-4">Chargement du jeu...</h1>
                        <p class="text-gray-400">Si le jeu ne se charge pas, actualisez la page (F5)</p>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
