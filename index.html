<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game Technologie Collège</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icônes Lucide en SVG
        const Clock = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
            </svg>
        );

        const Lightbulb = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M9 18h6"/>
                <path d="M10 22h4"/>
                <path d="M15.09 14c.18-.98.45-1.73.45-3a6 6 0 1 0-12 0c0 1.27.27 2.02.45 3"/>
            </svg>
        );

        const Lock = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
        );

        const CheckCircle = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="m9 12 2 2 4-4"/>
            </svg>
        );

        const XCircle = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="m15 9-6 6"/>
                <path d="m9 9 6 6"/>
            </svg>
        );

        const Key = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="7.5" cy="15.5" r="5.5"/>
                <path d="m21 2-9.6 9.6"/>
                <path d="m15.5 7.5 3 3L22 7l-3-3"/>
            </svg>
        );

        const Trophy = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                <path d="M4 22h16"/>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
            </svg>
        );

        const BookOpen = ({ className, size = 24 }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
        );

        function EscapeGame() {
            const TEMPS_PAR_ROOM = 600;
            
            const [ecran, setEcran] = useState('accueil');
            const [roomActuelle, setRoomActuelle] = useState(0);
            const [temps, setTemps] = useState(TEMPS_PAR_ROOM);
            const [enigmeActuelle, setEnigmeActuelle] = useState(0);
            const [enigmesSelectionnees, setEnigmesSelectionnees] = useState([]);
            const [reponse, setReponse] = useState('');
            const [erreur, setErreur] = useState(false);
            const [enigmesResolues, setEnigmesResolues] = useState([false, false, false, false]);
            const [indiceAffiche, setIndiceAffiche] = useState(false);
            const [codesRooms, setCodesRooms] = useState([]);
            const [codeEntree, setCodeEntree] = useState('');
            const [erreurCode, setErreurCode] = useState(false);
            const [messageDecrypte, setMessageDecrypte] = useState('');
            const [tempsTotal, setTempsTotal] = useState(0);
            const [chiffrementSelectionne, setChiffrementSelectionne] = useState(null);

            const banqueEnigmes = {
                evolution: [
                    { question: "Quelle innovation a permis de passer du téléphone fixe au mobile ?", reponse: "portabilite", indice: "Ce qui permet de déplacer", type: "text" },
                    { question: "En quelle année le premier iPhone est-il sorti ?", reponse: "2007", indice: "Entre 2000 et 2010", type: "number" },
                    { question: "Comment appelle-t-on une innovation qui change radicalement un marché ?", reponse: "rupture", indice: "Innovation de...", type: "text" },
                    { question: "Quelle est la famille de matériaux la plus légère ?", reponse: "plastique", indice: "Dérivé du pétrole", type: "text" },
                    { question: "Quel matériau est issu d'un arbre ?", reponse: "bois", indice: "Matériau naturel", type: "text" },
                    { question: "Comment appelle-t-on le mélange de fer et de carbone ?", reponse: "acier", indice: "Alliage métallique", type: "text" },
                    { question: "Combien y a-t-il de grandes familles de matériaux ?", reponse: "4", indice: "Métaux, plastiques...", type: "number" },
                    { question: "Quel matériau conduit le mieux l'électricité ?", reponse: "cuivre", indice: "Métal orangé", type: "text" },
                    { question: "Quel matériau est recyclable à l'infini ?", reponse: "aluminium", indice: "Métal léger", type: "text" },
                    { question: "Comment s'appelle l'évolution qui prend en compte l'environnement ?", reponse: "durable", indice: "Développement...", type: "text" },
                    { question: "Quel objet a remplacé le walkman ?", reponse: "smartphone", indice: "Téléphone intelligent", type: "text" },
                    { question: "Combien de générations de téléphones mobiles existe-t-il ?", reponse: "5", indice: "On parle de 5G", type: "number" },
                    { question: "Quel matériau est transparent et cassant ?", reponse: "verre", indice: "Pour les fenêtres", type: "text" },
                    { question: "Quel métal ne rouille pas ?", reponse: "inox", indice: "Acier inoxydable", type: "text" },
                    { question: "Comment appelle-t-on un objet qui se connecte à Internet ?", reponse: "connecte", indice: "Objet...", type: "text" },
                    { question: "Quelle propriété mesure la résistance à la déformation ?", reponse: "durete", indice: "Échelle de Mohs", type: "text" },
                    { question: "Quel matériau composite est utilisé dans les avions ?", reponse: "carbone", indice: "Fibre de...", type: "text" },
                    { question: "À quelle température fond l'aluminium (en °C) ?", reponse: "660", indice: "Entre 600 et 700", type: "number" },
                    { question: "Comment appelle-t-on un matériau isolant électrique ?", reponse: "isolant", indice: "Contraire de conducteur", type: "text" },
                    { question: "Quel matériau biodégradable remplace le plastique ?", reponse: "bioplastique", indice: "Bio + plastique", type: "text" },
                    { question: "En quelle année a été créé le premier ordinateur personnel ?", reponse: "1981", indice: "Années 1980", type: "number" },
                    { question: "Qui a inventé le World Wide Web ?", reponse: "berners", indice: "Tim Berners-...", type: "text" },
                    { question: "Quel pourcentage de plastiques est recyclé en France ?", reponse: "26", indice: "Entre 20 et 30%", type: "number" },
                    { question: "Comment s'appelle le procédé de chauffage du verre ?", reponse: "trempe", indice: "Verre trempé", type: "text" },
                    { question: "Quelle invention a permis le streaming vidéo ?", reponse: "internet", indice: "Réseau mondial", type: "text" }
                ],
                cybersecurite: [
                    { question: "Comment appelle-t-on un programme malveillant ?", reponse: "virus", indice: "Comme une maladie", type: "text" },
                    { question: "Combien de caractères min pour un mot de passe sûr ?", reponse: "12", indice: "Plus de 10", type: "number" },
                    { question: "Comment s'appelle l'usurpation d'identité par email ?", reponse: "phishing", indice: "Commence par 'ph'", type: "text" },
                    { question: "Quelle technique crypte un fichier ?", reponse: "chiffrement", indice: "Rendre illisible", type: "text" },
                    { question: "Comment appelle-t-on les traces sur Internet ?", reponse: "numeriques", indice: "Traces...", type: "text" },
                    { question: "Quel protocole sécurise les sites web ?", reponse: "https", indice: "HTTP + S", type: "text" },
                    { question: "Combien d'octets dans 1 kilooctet ?", reponse: "1024", indice: "Un peu plus de 1000", type: "number" },
                    { question: "Quelle loi protège les données en Europe ?", reponse: "rgpd", indice: "4 lettres", type: "text" },
                    { question: "Comment appelle-t-on l'authentification en deux étapes ?", reponse: "double", indice: "Authentification...", type: "text" },
                    { question: "Que signifie CPU ?", reponse: "processeur", indice: "Cerveau de l'ordinateur", type: "text" },
                    { question: "Combien de bits dans un octet ?", reponse: "8", indice: "Moins de 10", type: "number" },
                    { question: "Comment s'appelle la mémoire temporaire ?", reponse: "ram", indice: "3 lettres", type: "text" },
                    { question: "Quel langage utilise des blocs visuels ?", reponse: "scratch", indice: "Pour débutants", type: "text" },
                    { question: "Comment s'appelle l'adresse d'un site web ?", reponse: "url", indice: "3 lettres", type: "text" },
                    { question: "Combien de valeurs pour un bit ?", reponse: "2", indice: "0 et 1", type: "number" },
                    { question: "Comment s'appelle un réseau local ?", reponse: "lan", indice: "Local Area Network", type: "text" },
                    { question: "Comment s'appelle le stockage en ligne ?", reponse: "cloud", indice: "Nuage en anglais", type: "text" },
                    { question: "Combien de Mo dans 1 Go ?", reponse: "1000", indice: "Environ 1000", type: "number" },
                    { question: "Comment s'appelle un logiciel espion ?", reponse: "spyware", indice: "Spy = espion", type: "text" },
                    { question: "Quel type d'attaque sature un serveur ?", reponse: "ddos", indice: "4 lettres", type: "text" },
                    { question: "Comment s'appelle un pare-feu en anglais ?", reponse: "firewall", indice: "Fire + wall", type: "text" },
                    { question: "Comment s'appelle un logiciel rançonneur ?", reponse: "ransomware", indice: "Ransom = rançon", type: "text" },
                    { question: "Quel protocole transfère des pages web ?", reponse: "http", indice: "4 lettres", type: "text" },
                    { question: "Comment s'appelle un réseau privé virtuel ?", reponse: "vpn", indice: "3 lettres", type: "text" },
                    { question: "Quel appareil connecte plusieurs ordinateurs ?", reponse: "switch", indice: "Commutateur", type: "text" }
                ],
                durable: [
                    { question: "Combien de piliers compte le développement durable ?", reponse: "3", indice: "Économique, social...", type: "number" },
                    { question: "Sur combien est noté l'indice de réparabilité ?", reponse: "10", indice: "Comme une note", type: "number" },
                    { question: "Quel métal précieux dans les smartphones ?", reponse: "or", indice: "Métal jaune", type: "text" },
                    { question: "Quelle énergie provient du soleil ?", reponse: "solaire", indice: "Énergie...", type: "text" },
                    { question: "Comment s'appelle l'énergie du vent ?", reponse: "eolienne", indice: "Énergie...", type: "text" },
                    { question: "Combien d'énergies renouvelables principales ?", reponse: "5", indice: "Solaire, éolien...", type: "number" },
                    { question: "Quelle énergie utilise la force de l'eau ?", reponse: "hydraulique", indice: "Barrages", type: "text" },
                    { question: "Comment s'appelle l'énergie de la Terre ?", reponse: "geothermique", indice: "Géo = Terre", type: "text" },
                    { question: "Combien de litres d'eau pour fabriquer un jean ?", reponse: "7500", indice: "Entre 7000 et 8000", type: "number" },
                    { question: "Comment s'appelle le cycle de vie d'un produit ?", reponse: "berceau", indice: "Du... au tombeau", type: "text" },
                    { question: "Quel gaz à effet de serre principal ?", reponse: "co2", indice: "Formule chimique", type: "text" },
                    { question: "Combien d'années pour dégrader une bouteille plastique ?", reponse: "450", indice: "Entre 400 et 500", type: "number" },
                    { question: "Comment appelle-t-on l'énergie qui se renouvelle ?", reponse: "renouvelable", indice: "Énergie...
