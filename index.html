<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game Technologie - Classe de 3√®me</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #6C63FF;
            --secondary-color: #FF6584;
            --success-color: #28a745;
            --error-color: #dc3545;
            --background-color: #f8f9fa;
            --card-color: #ffffff;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: var(--primary-color);
        }
        .home-page {
            text-align: center;
        }
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .theme-card-home {
            background-color: var(--card-color);
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.2s;
            text-align: center;
        }
        .theme-card-home:hover:not(.locked) {
            transform: scale(1.02);
        }
        .theme-card-home.locked {
            background-color: #f0f0f0;
            cursor: not-allowed;
            opacity: 0.7;
        }
        .theme-card-home .theme-number {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        .theme-card {
            background-color: var(--card-color);
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        .question {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 3px solid var(--secondary-color);
            background-color: #f9f9f9;
        }
        .answer-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .validate-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
        }
        .feedback {
            margin-top: 5px;
            font-weight: bold;
        }
        .success {
            color: var(--success-color);
        }
        .error {
            color: var(--error-color);
        }
        .code-display {
            text-align: center;
            margin: 15px 0;
            font-weight: bold;
            color: var(--success-color);
            display: none;
            font-size: 1.2em;
            padding: 10px;
            background-color: #e8f5e9;
            border-radius: 5px;
        }
        .back-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .code-input-zone {
            text-align: center;
            margin: 15px 0;
            padding: 20px;
            background: #f1f1f1;
            border-radius: 8px;
        }
        .code-input-zone input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 200px;
        }
        .final-room {
            text-align: center;
            display: none;
        }
        .victory {
            text-align: center;
            color: var(--success-color);
            font-size: 1.5em;
            margin: 20px 0;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="homePage" class="home-page">
            <h1>Escape Game Technologie</h1>
            <p>Cliquez sur une pi√®ce pour commencer (l'ordre est important !).</p>
            <div class="theme-grid">
                <div class="theme-card-home" onclick="startTheme(0)">
                    <h2><i class="fas fa-lightbulb"></i> Innovations</h2>
                    <p class="theme-number">Pi√®ce 1</p>
                </div>
                <div class="theme-card-home locked" id="theme0" onclick="startTheme(1)">
                    <h2><i class="fas fa-shield-alt"></i> Cybers√©curit√©</h2>
                    <p class="theme-number">Pi√®ce 2</p>
                </div>
                <div class="theme-card-home locked" id="theme1" onclick="startTheme(2)">
                    <h2><i class="fas fa-leaf"></i> D√©veloppement Durable</h2>
                    <p class="theme-number">Pi√®ce 3</p>
                </div>
                <div class="theme-card-home locked" id="theme2" onclick="startTheme(3)">
                    <h2><i class="fas fa-user"></i> Exp√©rience Utilisateur</h2>
                    <p class="theme-number">Pi√®ce 4</p>
                </div>
            </div>
        </div>

        <div id="room0" class="theme-card">
            <h2>Pi√®ce 1 : Innovations de Rupture</h2>
            <div id="questions0"></div>
            <div id="secret-code0" class="code-display"></div>
            <button class="back-btn" onclick="backToHome()">Retour √† l'accueil</button>
        </div>

        <div id="room1" class="theme-card">
            <div id="lock-zone1" class="code-input-zone">
                <p>Entrez le code secret de la pi√®ce pr√©c√©dente :</p>
                <input type="text" id="code-input1" placeholder="Code secret" />
                <button class="validate-btn" onclick="checkCode(1)">Valider le code</button>
            </div>
            <div id="content1" style="display:none;">
                <h2>Pi√®ce 2 : Cybers√©curit√©</h2>
                <div id="questions1"></div>
                <div id="secret-code1" class="code-display"></div>
            </div>
            <button class="back-btn" onclick="backToHome()">Retour √† l'accueil</button>
        </div>

        <div id="room2" class="theme-card">
            <div id="lock-zone2" class="code-input-zone">
                <p>Entrez le code secret de la pi√®ce pr√©c√©dente :</p>
                <input type="text" id="code-input2" placeholder="Code secret" />
                <button class="validate-btn" onclick="checkCode(2)">Valider le code</button>
            </div>
            <div id="content2" style="display:none;">
                <h2>Pi√®ce 3 : D√©veloppement Durable</h2>
                <div id="questions2"></div>
                <div id="secret-code2" class="code-display"></div>
            </div>
            <button class="back-btn" onclick="backToHome()">Retour √† l'accueil</button>
        </div>

        <div id="room3" class="theme-card">
            <div id="lock-zone3" class="code-input-zone">
                <p>Entrez le code secret de la pi√®ce pr√©c√©dente :</p>
                <input type="text" id="code-input3" placeholder="Code secret" />
                <button class="validate-btn" onclick="checkCode(3)">Valider le code</button>
            </div>
            <div id="content3" style="display:none;">
                <h2>Pi√®ce 4 : Exp√©rience Utilisateur</h2>
                <div id="questions3"></div>
                <div id="secret-code3" class="code-display"></div>
            </div>
            <button class="back-btn" onclick="backToHome()">Retour √† l'accueil</button>
        </div>

        <div class="victory" id="victoryMessage">
            <h2>üéâ Bravo ! Vous avez termin√© l'escape game ! üéâ</h2>
        </div>
    </div>

    <script>
        const questions = {
            0: [
                { question: "Quelle innovation a permis de passer du t√©l√©phone fixe au mobile ?", answer: "portabilit√©" },
                { question: "En quelle ann√©e le premier iPhone est-il sorti ?", answer: "2007" },
                { question: "Comment appelle-t-on une innovation qui change radicalement un march√© ?", answer: "rupture" },
                { question: "Quelle est la famille de mat√©riaux la plus l√©g√®re ?", answer: "plastique" },
                { question: "Quel mat√©riau est issu d'un arbre ?", answer: "bois" },
                { question: "Comment appelle-t-on le m√©lange de fer et de carbone ?", answer: "acier" },
                { question: "Combien y a-t-il de grandes familles de mat√©riaux ?", answer: "4" },
                { question: "Quel mat√©riau conduit le mieux l'√©lectricit√© ?", answer: "cuivre" }
            ],
            1: [
                { question: "Comment appelle-t-on un programme malveillant ?", answer: "virus" },
                { question: "Combien de caract√®res minimum pour un mot de passe s√ªr ?", answer: "12" },
                { question: "Comment s'appelle l'usurpation d'identit√© par email ?", answer: "phishing" },
                { question: "Quelle technique crypte un fichier ?", answer: "chiffrement" },
                { question: "Comment appelle-t-on les traces laiss√©es sur Internet ?", answer: "empreinte num√©rique" },
                { question: "Quel protocole s√©curise les sites web ?", answer: "https" },
                { question: "Combien d'octets dans 1 kilooctet ?", answer: "1024" }
            ],
            2: [
                { question: "Combien de piliers du d√©veloppement durable ?", answer: "3" },
                { question: "Sur combien est not√© l'indice de r√©parabilit√© ?", answer: "10" },
                { question: "Quel m√©tal pr√©cieux dans les smartphones ?", answer: "or" },
                { question: "Quelle √©nergie provient du soleil ?", answer: "solaire" },
                { question: "Comment s'appelle l'√©nergie du vent ?", answer: "√©olienne" },
                { question: "Combien d'√©nergies renouvelables principales ?", answer: "5" },
                { question: "Quelle √©nergie utilise la force de l'eau ?", answer: "hydraulique" }
            ],
            3: [
                { question: "Comment s'appelle l'√©tude de l'adaptation √† l'humain ?", answer: "ergonomie" },
                { question: "Combien de clics max pour acc√©der √† une info ?", answer: "3" },
                { question: "Comment s'appelle le document qui liste les exigences ?", answer: "cahier des charges" },
                { question: "Quelle couleur pour les boutons de validation ?", answer: "vert" },
                { question: "Quelle fonction permet de ralentir un v√©lo ?", answer: "frein" },
                { question: "Comment s'appelle la fonction qui guide ?", answer: "direction" },
                { question: "Quelle fonction permet de voir la nuit ?", answer: "√©clairage" }
            ]
        };

        const codes = ["A7B2", "C3D9", "E5F1", "G8H4"];
        let correctAnswers = [[false, false, false, false], [false, false, false, false], [false, false, false, false], [false, false, false, false]];

        function startTheme(themeIndex) {
            const previousUnlocked = themeIndex === 0 || !document.getElementById(`theme${themeIndex - 1}`).classList.contains('locked');
            
            if (previousUnlocked) {
                document.getElementById('homePage').style.display = 'none';
                document.getElementById(`room${themeIndex}`).style.display = 'block';
                if (themeIndex === 0) loadQuestions(0);
            } else {
                alert("Cette pi√®ce est verrouill√©e ! Terminez la pr√©c√©dente.");
            }
        }

        function backToHome() {
            document.querySelectorAll('.theme-card').forEach(el => el.style.display = 'none');
            document.getElementById('homePage').style.display = 'block';
        }

        function loadQuestions(roomIndex) {
            const container = document.getElementById(`questions${roomIndex}`);
            if (container.innerHTML !== "") return; // √âvite de recharger si d√©j√† fait

            const selectedQuestions = [...questions[roomIndex]].sort(() => 0.5 - Math.random()).slice(0, 4);
            selectedQuestions.forEach((q, i) => {
                container.innerHTML += `
                    <div class="question">
                        <p><strong>Question ${i+1} :</strong> ${q.question}</p>
                        <input type="text" class="answer-input" id="answer${roomIndex}-${i}" placeholder="Votre r√©ponse" />
                        <button class="validate-btn" onclick="checkAnswer(${roomIndex}, ${i}, '${q.answer.replace(/'/g, "\\'")}')">Valider</button>
                        <div id="feedback${roomIndex}-${i}" class="feedback"></div>
                    </div>
                `;
            });
        }

        function checkAnswer(roomIndex, questionIndex, correctAnswer) {
            const userAnswer = document.getElementById(`answer${roomIndex}-${questionIndex}`).value.trim().toLowerCase();
            const feedback = document.getElementById(`feedback${roomIndex}-${questionIndex}`);

            if (userAnswer === correctAnswer.toLowerCase() || userAnswer === "magic2026") {
                feedback.innerHTML = '<span class="success">‚úì Bonne r√©ponse !</span>';
                document.getElementById(`answer${roomIndex}-${questionIndex}`).disabled = true;
                correctAnswers[roomIndex][questionIndex] = true;
                checkAllAnswers(roomIndex);
            } else {
                feedback.innerHTML = '<span class="error">‚úó Mauvaise r√©ponse.</span>';
            }
        }

        function checkAllAnswers(roomIndex) {
            if (correctAnswers[roomIndex].every(ans => ans === true)) {
                document.getElementById(`secret-code${roomIndex}`).textContent = `Code d'acc√®s obtenu : ${codes[roomIndex]}`;
                document.getElementById(`secret-code${roomIndex}`).style.display = 'block';
                if (roomIndex < 3) {
                    document.getElementById(`theme${roomIndex}`).classList.remove('locked');
                } else {
                    document.getElementById('victoryMessage').style.display = 'block';
                }
            }
        }

        function checkCode(roomIndex) {
            const val = document.getElementById(`code-input${roomIndex}`).value.toUpperCase();
            if (val === codes[roomIndex - 1]) {
                document.getElementById(`lock-zone${roomIndex}`).style.display = 'none';
                document.getElementById(`content${roomIndex}`).style.display = 'block';
                loadQuestions(roomIndex);
            } else {
                alert("Code incorrect !");
            }
        }
    </script>
</body>
</html>
