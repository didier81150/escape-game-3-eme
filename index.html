<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game Technologie - Classe de 3√®me</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #6C63FF;
            --secondary-color: #FF6584;
            --success-color: #28a745;
            --error-color: #dc3545;
            --background-color: #f8f9fa;
            --card-color: #ffffff;
            --text-color: #333333;
            --pastel-blue: #a2d2ff;
            --pastel-pink: #ffb3c6;
            --pastel-green: #b7e4c7;
            --pastel-yellow: #ffdfba;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            color: var(--text-color);
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
            background-color: var(--card-color);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--pastel-blue), var(--pastel-pink));
            border-radius: 15px 15px 0 0;
            color: white;
            margin: -20px -20px 20px -20px;
        }
        h1, h2, h3 {
            color: var(--primary-color);
        }
        h1 {
            margin: 0;
            font-size: 2.5rem;
        }
        .theme-card {
            background-color: var(--card-color);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid var(--primary-color);
        }
        .question {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 4px solid var(--secondary-color);
            background-color: #f8f9fa;
        }
        .answer-input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .hint-btn, .validate-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 5px;
        }
        .validate-btn {
            background-color: var(--success-color);
        }
        .hint-btn:hover, .validate-btn:hover {
            opacity: 0.9;
        }
        .hint {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background-color: #e9f7fe;
            border-radius: 4px;
        }
        .timer {
            font-size: 1.5rem;
            text-align: center;
            margin: 20px 0;
            color: var(--secondary-color);
        }
        .door-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .door-item {
            text-align: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 10px;
            width: 20%;
            min-width: 120px;
            margin: 5px;
            transition: all 0.3s;
        }
        .door-item.current {
            background-color: var(--pastel-green);
            border: 2px solid var(--success-color);
        }
        .door-item.next {
            background-color: var(--pastel-yellow);
            cursor: not-allowed;
            opacity: 0.7;
        }
        .door-item.locked {
            background-color: #ddd;
            cursor: not-allowed;
        }
        .feedback {
            margin-top: 5px;
            font-weight: bold;
        }
        .success {
            color: var(--success-color);
        }
        .error {
            color: var(--error-color);
        }
        .code-display {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--success-color);
            display: none;
        }
        .next-room-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
        .magic-code-input {
            text-align: center;
            margin: 15px 0;
        }
        .magic-code-input input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 200px;
        }
        .final-room {
            text-align: center;
            display: none;
        }
        .coding-methods {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .coding-method {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 20%;
            min-width: 150px;
            margin: 5px;
        }
        .victory {
            text-align: center;
            font-size: 2rem;
            color: var(--success-color);
            margin: 20px 0;
            display: none;
        }
        #screenshot-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Escape Game Technologie</h1>
            <p>R√©solvez les √©nigmes dans l'ordre pour avancer !</p>
        </header>

        <div class="timer">Temps restant : <span id="time">300</span> secondes</div>

        <div class="door-container" id="doors">
            <div class="door-item current" onclick="enterRoom(0)">
                <i class="fas fa-door-open"></i>
                <p>1. Innovations</p>
            </div>
            <div class="door-item next" id="door1">
                <i class="fas fa-door-closed"></i>
                <p>2. Cybers√©curit√©</p>
            </div>
            <div class="door-item locked" id="door2">
                <i class="fas fa-door-closed"></i>
                <p>3. D√©veloppement Durable</p>
            </div>
            <div class="door-item locked" id="door3">
                <i class="fas fa-door-closed"></i>
                <p>4. Exp√©rience Utilisateur</p>
            </div>
        </div>

        <div id="room0" class="theme-card">
            <h2>Th√®me 1 : Innovations de Rupture</h2>
            <div id="questions0"></div>
            <div class="magic-code-input">
                <input type="text" id="magic-code0" placeholder="Code professeur" />
                <button onclick="useMagicCode(0)">Valider</button>
            </div>
            <div id="secret-code0" class="code-display"></div>
            <button id="next0" class="next-room-btn" onclick="nextRoom(0)">Pi√®ce suivante ‚Üí</button>
        </div>

        <div id="room1" class="theme-card" style="display: none;">
            <h2>Th√®me 2 : Cybers√©curit√©</h2>
            <div id="questions1"></div>
            <div class="magic-code-input">
                <input type="text" id="magic-code1" placeholder="Code professeur" />
                <button onclick="useMagicCode(1)">Valider</button>
            </div>
            <div id="secret-code1" class="code-display"></div>
            <button id="next1" class="next-room-btn" onclick="nextRoom(1)">Pi√®ce suivante ‚Üí</button>
        </div>

        <div id="room2" class="theme-card" style="display: none;">
            <h2>Th√®me 3 : D√©veloppement Durable</h2>
            <div id="questions2"></div>
            <div class="magic-code-input">
                <input type="text" id="magic-code2" placeholder="Code professeur" />
                <button onclick="useMagicCode(2)">Valider</button>
            </div>
            <div id="secret-code2" class="code-display"></div>
            <button id="next2" class="next-room-btn" onclick="nextRoom(2)">Pi√®ce suivante ‚Üí</button>
        </div>

        <div id="room3" class="theme-card" style="display: none;">
            <h2>Th√®me 4 : Exp√©rience Utilisateur</h2>
            <div id="questions3"></div>
            <div class="magic-code-input">
                <input type="text" id="magic-code3" placeholder="Code professeur" />
                <button onclick="useMagicCode(3)">Valider</button>
            </div>
            <div id="secret-code3" class="code-display"></div>
            <button id="next3" class="next-room-btn" onclick="nextRoom(3)">Pi√®ce finale ‚Üí</button>
        </div>

        <div class="final-room" id="finalRoom">
            <h2>Pi√®ce Finale : D√©codage</h2>
            <p>Utilisez les codes secrets des 4 th√®mes pour d√©coder la phrase myst√®re.</p>
            <div class="coding-methods">
                <div class="coding-method">
                    <h3>Binaire</h3>
                    <p>Exemple : 01000001 = A</p>
                </div>
                <div class="coding-method">
                    <h3>Morse</h3>
                    <p>Exemple : .- = A</p>
                </div>
                <div class="coding-method">
                    <h3>C√©sar (+3)</h3>
                    <p>Exemple : D = A</p>
                </div>
                <div class="coding-method">
                    <h3>Hexad√©cimal</h3>
                    <p>Exemple : 41 = A</p>
                </div>
            </div>
            <p>Phrase cod√©e : <span id="codedPhrase"></span></p>
            <div class="magic-code-input">
                <input type="text" id="finalAnswer" placeholder="Votre r√©ponse d√©cod√©e" />
                <button onclick="validateFinalAnswer()">Valider</button>
            </div>
        </div>

        <div class="victory" id="victory">
            <h2>üéâ Bravo ! Vous avez r√©ussi l'escape game ! üéâ</h2>
            <p>Temps restant : <span id="remainingTime"></span> secondes</p>
            <p>Prenez une capture d'√©cran et t√©l√©chargez-la sur JotForm avec votre nom, pr√©nom et classe.</p>
        </div>
    </div>

    <script>
        // Questions pour chaque th√®me (20 questions par th√®me)
        const questions = {
            0: [
                { question: "Quelle innovation a permis de passer du t√©l√©phone fixe au mobile ?", answer: "portabilit√©", hint: "Ce qui permet de d√©placer l'appareil." },
                { question: "En quelle ann√©e le premier iPhone est-il sorti ?", answer: "2007", hint: "Entre 2000 et 2010." },
                { question: "Comment appelle-t-on une innovation qui change radicalement un march√© ?", answer: "rupture", hint: "Innovation de..." },
                { question: "Quelle est la famille de mat√©riaux la plus l√©g√®re ?", answer: "plastique", hint: "D√©riv√© du p√©trole." },
                { question: "Quel mat√©riau est issu d'un arbre ?", answer: "bois", hint: "Mat√©riau naturel et renouvelable." },
                { question: "Comment appelle-t-on le m√©lange de fer et de carbone ?", answer: "acier", hint: "Alliage m√©tallique tr√®s r√©sistant." },
                { question: "Combien y a-t-il de grandes familles de mat√©riaux ?", answer: "4", hint: "M√©taux, c√©ramiques, polym√®res, composites." },
                { question: "Quel mat√©riau conduit le mieux l'√©lectricit√© ?", answer: "cuivre", hint: "M√©tal rouge√¢tre souvent utilis√© dans les c√¢bles." },
                { question: "Quel mat√©riau est recyclable √† l'infini ?", answer: "aluminium", hint: "M√©tal l√©ger utilis√© dans les canettes." },
                { question: "Comment s'appelle l'√©volution qui prend en compte l'environnement ?", answer: "durable", hint: "D√©veloppement..." },
                { question: "Quel objet a remplac√© le walkman ?", answer: "baladeur num√©rique", hint: "Appareil pour √©couter de la musique." },
                { question: "Combien de g√©n√©rations de t√©l√©phones mobiles existe-t-il en 2026 ?", answer: "5", hint: "On parle de 5G." },
                { question: "Quel mat√©riau est transparent et cassant ?", answer: "verre", hint: "Utilis√© pour les fen√™tres." },
                { question: "Quel m√©tal ne rouille pas ?", answer: "inox", hint: "Acier inoxydable." },
                { question: "Comment appelle-t-on un objet qui se connecte √† Internet ?", answer: "connect√©", hint: "Objet intelligent." },
                { question: "Quelle propri√©t√© mesure la r√©sistance √† la rayure ?", answer: "duret√©", hint: "√âchelle de Mohs." },
                { question: "Quel mat√©riau composite est utilis√© dans les avions ?", answer: "carbone", hint: "Fibre de..." },
                { question: "√Ä quelle temp√©rature fond l'aluminium (en ¬∞C) ?", answer: "660", hint: "Entre 600 et 700." },
                { question: "Comment appelle-t-on un mat√©riau isolant √©lectrique ?", answer: "isolant", hint: "Ne conduit pas l'√©lectricit√©." },
                { question: "Quel mat√©riau biod√©gradable remplace le plastique ?", answer: "bioplastique", hint: "Fabriqu√© √† partir de mati√®res v√©g√©tales." },
                { question: "En quelle ann√©e a √©t√© cr√©√© le premier ordinateur personnel grand public ?", answer: "1977", hint: "Apple II." },
                { question: "Qui a invent√© le World Wide Web ?", answer: "tim berners-lee", hint: "Scientifique britannique." },
                { question: "Quel pourcentage de plastiques est recycl√© en France en 2026 ?", answer: "35", hint: "Entre 30% et 40%." },
                { question: "Comment s'appelle le proc√©d√© de chauffage puis refroidissement rapide du verre ?", answer: "trempe", hint: "Rend le verre plus r√©sistant." },
                { question: "Quelle invention a permis le streaming vid√©o ?", answer: "internet haut d√©bit", hint: "R√©seau rapide." },
                { question: "Quel est le premier ordinateur personnel grand public ?", answer: "apple ii", hint: "Cr√©√© par Steve Wozniak." }
            ],
            1: [
                { question: "Comment appelle-t-on un programme malveillant ?", answer: "virus", hint: "Comme une maladie informatique." },
                { question: "Combien de caract√®res minimum sont recommand√©s pour un mot de passe s√ªr ?", answer: "12", hint: "Plus c'est long, plus c'est s√ªr." },
                { question: "Comment s'appelle l'usurpation d'identit√© par email ?", answer: "phishing", hint: "Technique de piratage par email." },
                { question: "Quelle technique permet de rendre un fichier illisible sans une cl√© ?", answer: "chiffrement", hint: "Prot√®ge les donn√©es." },
                { question: "Comment appelle-t-on les traces laiss√©es sur Internet ?", answer: "empreinte num√©rique", hint: "Tout ce qu'on fait en ligne." },
                { question: "Quel protocole s√©curise les sites web (avec un cadenas) ?", answer: "https", hint: "HTTP s√©curis√©." },
                { question: "Combien d'octets y a-t-il dans un kilooctet ?", answer: "1024", hint: "Un peu plus que 1000." },
                { question: "Quelle loi europ√©enne prot√®ge les donn√©es personnelles ?", answer: "rgpd", hint: "R√®glement G√©n√©ral..." },
                { question: "Comment appelle-t-on l'authentification en deux √©tapes ?", answer: "double authentification", hint: "Deux v√©rifications." },
                { question: "Que signifie CPU en informatique ?", answer: "unit√© centrale", hint: "Cerveau de l'ordinateur." },
                { question: "Combien de bits composent un octet ?", answer: "8", hint: "Base de l'informatique." },
                { question: "Comment s'appelle la m√©moire vive de l'ordinateur ?", answer: "ram", hint: "M√©moire temporaire." },
                { question: "Quel langage de programmation utilise des blocs visuels ?", answer: "scratch", hint: "Pour apprendre √† coder." },
                { question: "Comment s'appelle l'adresse d'un site web ?", answer: "url", hint: "Commence par http://." },
                { question: "Combien de valeurs peut prendre un bit ?", answer: "2", hint: "0 ou 1." },
                { question: "Comment s'appelle un r√©seau local ?", answer: "lan", hint: "Local Area Network." },
                { question: "Comment s'appelle le stockage de donn√©es sur Internet ?", answer: "cloud", hint: "Nuage en anglais." },
                { question: "Combien de m√©gaoctets y a-t-il dans un gigaoctet ?", answer: "1024", hint: "Comme pour les kilooctets." },
                { question: "Comment s'appelle un logiciel espion ?", answer: "spyware", hint: "Espionne vos activit√©s." },
                { question: "Quel type d'attaque consiste √† saturer un serveur de requ√™tes ?", answer: "ddos", hint: "Attaque par d√©ni de service." },
                { question: "Comment s'appelle un pare-feu en anglais ?", answer: "firewall", hint: "Prot√®ge contre les intrusions." },
                { question: "Comment s'appelle un logiciel qui bloque l'acc√®s √† vos fichiers contre ran√ßon ?", answer: "ransomware", hint: "Ran√ßon en anglais." },
                { question: "Quel protocole permet d'envoyer des emails ?", answer: "smtp", hint: "Simple Mail Transfer Protocol." },
                { question: "Comment s'appelle un r√©seau priv√© virtuel ?", answer: "vpn", hint: "S√©curise la connexion." },
                { question: "Quel appareil permet de connecter plusieurs ordinateurs entre eux ?", answer: "routeur", hint: "Partage la connexion Internet." }
            ],
            2: [
                { question: "Combien existe-t-il de piliers du d√©veloppement durable ?", answer: "3", hint: "√âconomique, social, environnemental." },
                { question: "Sur combien est not√© l'indice de r√©parabilit√© en France ?", answer: "10", hint: "Comme une note sur 10." },
                { question: "Quel m√©tal pr√©cieux se trouve dans les smartphones ?", answer: "or", hint: "M√©tal jaune et pr√©cieux." },
                { question: "Quelle √©nergie provient directement du soleil ?", answer: "solaire", hint: "Panneaux solaires." },
                { question: "Comment s'appelle l'√©nergie produite par le vent ?", answer: "√©olienne", hint: "√âoliennes." },
                { question: "Combien existe-t-il de grandes familles d'√©nergies renouvelables ?", answer: "5", hint: "Solaire, √©olien, hydraulique, g√©othermique, biomasse." },
                { question: "Quelle √©nergie utilise la force de l'eau ?", answer: "hydraulique", hint: "Barrages." },
                { question: "Comment s'appelle l'√©nergie provenant de la chaleur de la Terre ?", answer: "g√©othermique", hint: "G√©o = Terre." },
                { question: "Combien de litres d'eau sont n√©cessaires pour fabriquer un jean ?", answer: "7500", hint: "Entre 7000 et 8000." },
                { question: "Comment s'appelle l'analyse du cycle de vie d'un produit ?", answer: "acv", hint: "De sa cr√©ation √† sa fin de vie." },
                { question: "Quel est le principal gaz √† effet de serre ?", answer: "co2", hint: "Dioxyde de carbone." },
                { question: "Combien d'ann√©es met une bouteille en plastique √† se d√©grader ?", answer: "450", hint: "Plusieurs si√®cles." },
                { question: "Comment appelle-t-on une √©nergie qui se renouvelle naturellement ?", answer: "renouvelable", hint: "Contraire de fossile." },
                { question: "Quel label garantit qu'un produit est respectueux de l'environnement ?", answer: "√©colabel", hint: "Label √©cologique." },
                { question: "Combien de watts consomme une ampoule LED standard ?", answer: "10", hint: "Moins qu'une ampoule classique." },
                { question: "Quelle unit√© mesure l'√©nergie ?", answer: "joule", hint: "Symbole J." },
                { question: "Comment s'appelle la transformation de la lumi√®re en √©lectricit√© ?", answer: "photovolta√Øque", hint: "Panneaux solaires." },
                { question: "Quel pourcentage de l'√©lectricit√© fran√ßaise est d'origine nucl√©aire en 2026 ?", answer: "50", hint: "En baisse depuis 2020." },
                { question: "Quelle est l'unit√© de mesure de la puissance √©lectrique ?", answer: "watt", hint: "Symbole W." },
                { question: "Quel est l'objectif maximal de r√©chauffement climatique selon l'Accord de Paris ?", answer: "1.5", hint: "En degr√©s Celsius." },
                { question: "Comment s'appelle l'√©nergie stock√©e dans un objet en hauteur ?", answer: "potentielle", hint: "√ânergie de position." },
                { question: "Quelle √©nergie est produite par un objet en mouvement ?", answer: "cin√©tique", hint: "√ânergie du mouvement." }
            ],
            3: [
                { question: "Comment s'appelle l'√©tude de l'adaptation des outils √† l'humain ?", answer: "ergonomie", hint: "Confort et efficacit√©." },
                { question: "Combien de clics maximum sont recommand√©s pour acc√©der √† une information sur un site web ?", answer: "3", hint: "R√®gle des 3 clics." },
                { question: "Comment s'appelle le document qui d√©finit les besoins pour un projet ?", answer: "cahier des charges", hint: "Liste des exigences." },
                { question: "Quelle couleur est g√©n√©ralement utilis√©e pour les boutons de validation ?", answer: "vert", hint: "Comme un feu tricolore." },
                { question: "Quelle fonction permet de ralentir ou arr√™ter un v√©lo ?", answer: "frein", hint: "S√©curit√©." },
                { question: "Comment s'appelle la fonction qui permet de changer de direction ?", answer: "direction", hint: "Volant ou guidon." },
                { question: "Quelle fonction permet de voir dans l'obscurit√© ?", answer: "√©clairage", hint: "Phares ou lampe." },
                { question: "Combien de fonctions principales un v√©lo doit-il assurer ?", answer: "5", hint: "Rouler, diriger, freiner, √©clairer, transporter." },
                { question: "Comment s'appelle le syst√®me qui transmet le mouvement des p√©dales √† la roue ?", answer: "transmission", hint: "Cha√Æne et pignons." },
                { question: "Comment s'appelle un mouvement circulaire complet ?", answer: "rotation", hint: "360 degr√©s." },
                { question: "Comment s'appelle une instruction qui se r√©p√®te en programmation ?", answer: "boucle", hint: "For ou while." },
                { question: "Quelle structure permet de faire un choix dans un algorithme ?", answer: "condition", hint: "Si... alors..." },
                { question: "Comment s'appelle une suite logique d'instructions ?", answer: "algorithme", hint: "Recette de cuisine pour l'ordinateur." },
                { question: "Combien de valeurs peut prendre une variable bool√©enne ?", answer: "2", hint: "Vrai ou faux." },
                { question: "Comment s'appelle un bloc de code r√©utilisable ?", answer: "fonction", hint: "Sous-programme." },
                { question: "Quel capteur permet de mesurer les distances ?", answer: "ultrason", hint: "Comme les chauves-souris." },
                { question: "Comment s'appelle la carte programmable Arduino ?", answer: "microcontr√¥leur", hint: "Mini-ordinateur." },
                { question: "Combien de broches num√©riques poss√®de une carte Arduino Uno ?", answer: "14", hint: "Entre 10 et 20." },
                { question: "Quelle fonction s'ex√©cute une seule fois au d√©marrage d'un programme Arduino ?", answer: "setup", hint: "Initialisation." },
                { question: "Comment s'appelle la fonction qui se r√©p√®te en boucle sur Arduino ?", answer: "loop", hint: "Boucle principale." },
                { question: "Quel composant √©lectronique √©met de la lumi√®re ?", answer: "led", hint: "Diode √©lectroluminescente." }
            ]
        };

        // Codes secrets pour chaque th√®me
        const codes = ["INNO2026", "SECU2026", "DURA2026", "ERGO2026"];
        // Code magique pour les tests
        const MAGIC_CODE = "PROF2026";
        let currentRoom = 0;
        let timeLeft = 300;
        let timer;
        let correctAnswers = [0, 0, 0, 0];

        // D√©marrer le chronom√®tre
        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('time').textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    alert("Temps √©coul√© ! Le jeu est termin√©.");
                    document.getElementById('time').textContent = "0";
                }
            }, 1000);
        }

        // Entrer dans une pi√®ce
        function enterRoom(roomIndex) {
            if (roomIndex !== currentRoom) return;
            document.querySelectorAll('.theme-card').forEach(el => el.style.display = 'none');
            document.getElementById(`room${roomIndex}`).style.display = 'block';
            loadQuestions(roomIndex);
            if (roomIndex === 0) startTimer();
        }

        // Charger les questions
        function loadQuestions(roomIndex) {
            const container = document.getElementById(`questions${roomIndex}`);
            container.innerHTML = '';
            const selectedQuestions = [...questions[roomIndex]].sort(() => 0.5 - Math.random()).slice(0, 4);
            selectedQuestions.forEach((q, i) => {
                container.innerHTML += `
                    <div class="question">
                        <p><strong>Question ${i+1} :</strong> ${q.question}</p>
                        <input type="text" class="answer-input" id="answer${roomIndex}-${i}" placeholder="Votre r√©ponse" />
                        <button class="hint-btn" onclick="showHint('hint${roomIndex}-${i}')">Indice</button>
                        <div id="hint${roomIndex}-${i}" class="hint">${q.hint}</div>
                        <button class="validate-btn" onclick="checkAnswer(${roomIndex}, ${i}, '${q.answer}')">Valider</button>
                        <div id="feedback${roomIndex}-${i}" class="feedback"></div>
                    </div>
                `;
            });
        }

        // V√©rifier la r√©ponse
        function checkAnswer(roomIndex, questionIndex, correctAnswer) {
            const userAnswer = document.getElementById(`answer${roomIndex}-${questionIndex}`).value.toLowerCase().trim();
            const feedback = document.getElementById(`feedback${roomIndex}-${questionIndex}`);
            if (userAnswer === correctAnswer) {
                feedback.innerHTML = '<span class="success">‚úì Bonne r√©ponse !</span>';
                document.getElementById(`answer${roomIndex}-${questionIndex}`).style.backgroundColor = "#d4edda";
                correctAnswers[roomIndex]++;
                if (correctAnswers[roomIndex] === 4) {
                    document.getElementById(`secret-code${roomIndex}`).textContent = `Code secret : ${codes[roomIndex]}`;
                    document.getElementById(`secret-code${roomIndex}`).style.display = 'block';
                    document.getElementById(`next${roomIndex}`).style.display = 'block';
                    if (roomIndex < 3) {
                        document.getElementById(`door${roomIndex}`).className = "door-item current";
                        document.getElementById(`door${roomIndex+1}`).className = "door-item next";
                    }
                }
            } else {
                feedback.innerHTML = '<span class="error">‚úó Mauvaise r√©ponse. R√©essayez !</span>';
                document.getElementById(`answer${roomIndex}-${questionIndex}`).style.backgroundColor = "#f8d7da";
            }
        }

        // Utiliser le code magique (pour les tests)
        function useMagicCode(roomIndex) {
            const magicCodeInput = document.getElementById(`magic-code${roomIndex}`).value;
            if (magicCodeInput === MAGIC_CODE) {
                correctAnswers[roomIndex] = 4;
                document.getElementById(`secret-code${roomIndex}`).textContent = `Code secret : ${codes[roomIndex]}`;
                document.getElementById(`secret-code${roomIndex}`).style.display = 'block';
                document.getElementById(`next${roomIndex}`).style.display = 'block';
                if (roomIndex < 3) {
                    document.getElementById(`door${roomIndex}`).className = "door-item current";
                    document.getElementById(`door${roomIndex+1}`).className = "door-item next";
                }
                alert("Code professeur accept√© ! Vous pouvez passer √† la pi√®ce suivante.");
            } else {
                alert("Code incorrect.");
            }
        }

        // Afficher un indice
        function showHint(hintId) {
            const hint = document.getElementById(hintId);
            hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
        }

        // Passer √† la pi√®ce suivante
        function nextRoom(roomIndex) {
            document.getElementById(`room${roomIndex}`).style.display = 'none';
            if (roomIndex === 3) {
                document.getElementById('finalRoom').style.display = 'block';
                document.getElementById('codedPhrase').textContent = `LECODEEST:${codes.join('-')}`;
            } else {
                currentRoom = roomIndex + 1;
                enterRoom(currentRoom);
            }
        }

        // Valider la r√©ponse finale
        function validateFinalAnswer() {
            clearInterval(timer);
            const userAnswer = document.getElementById('finalAnswer').value.toLowerCase().trim();
            if (userAnswer === "le code est: inno2026-secu2026-dura2026-ergo2026") {
                document.getElementById('victory').style.display = 'block';
                document.getElementById('remainingTime').textContent = timeLeft;
            } else {
                alert("R√©ponse incorrecte. R√©essayez !");
            }
        }
    </script>
</body>
</html>
